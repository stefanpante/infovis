<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Bars</title>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>
<body>

<!--https://spreadsheets.google.com/feeds/worksheets/1rYQEWe1Y0GW8IT4Sol_U4TBD6AzDj95wIA3kf8aAEDY/private/full/od6-->


<script>


    var dataTeam;
    var dataDriver;




    /*
     lift off
     */
    function loadData() {

        /* id toekomst best met treestruct werken, jaren als parents?*/
        /* bijv {year:2000, teams: <array teams>*/
        var team1 = {name:"Ferrari", color:"red", year:2000, pointsA:120 };
        var team2 = {name:"Ferrari", color:"red", year:2001, pointsA:130 };

        var rider1 = { color:"black", year:2000, name:"Schumacher", pointsA:87 };
        var rider2 = { color:"black", year:2001, name:"Schumacher", pointsA:80 };


        dataTeam = [];
        dataTeam.push(team1);
        dataTeam.push(team2);

        dataDriver = [];
        dataDriver.push(rider1);
        dataDriver.push(rider2);

        generateVis(0,30);


    }

    /*hieronder staat nog veel bullshit, voor de test van deze maandag */
    function generateVis(o_x,o_y){

        var width = 1000;
        var height = 1000;

        var widthScale = d3.scale.linear()
                .domain([1999,2014])
                .range([0,width]);

        var heightScale = d3.scale.linear()
                .domain([0,250])
                .range([0,height]);


        /*x en y as*/
        var xAxis = d3.svg.axis()
                .ticks(1)
                .scale(widthScale);

        var yAxis= d3.svg.axis()
                .ticks(10)
                .scale(heightScale);

        var canvas = d3.select("body").append("svg")
                .attr("width", width)
                .attr("height",height)
                .append("g")
                .attr("transform", "translate(" + o_x +"," + o_y +")");


        var barsTeam = canvas.selectAll("rect")
                .data(data)
                .enter()
                .append("rect")
                .attr("width",30)
                .attr("height",30)
                .attr("fill", function(d){return d.color;})
                .attr("y",function(d,i)  {return widthScale(100);})
                .attr("x",hordist);




        canvas.append("g")
                .attr("transform", "translate("+ hordist+",0)" )  /* reeds getranslated */
                .call(xAxis);

        /*text apart, new group*/
        canvas.append("g").selectAll("text")
                .data(data)
                .enter().append("text")
                .attr("fill","white")
                .attr("y",function (d,i) {return i*vertdist+20+o_y})
                .attr("x",hordist)
                .text(function (d) {return  d.year+" "+ d.constructor;});
        /*text apart, new group*/
        canvas.append("g").selectAll("text")
                .data(data)
                .enter().append("text")
                .attr("fill","black")
                .attr("y",function (d,i) {return i*vertdist+50+o_y})
                .attr("x",hordist)
                .text(function (d) {return  "Laps: "+d.laps+" Circuit Length: "+ d.distance+" m";});

        canvas.append("g").selectAll("text")
                .data(data)
                .enter().append("text")
                .attr("fill","black")
                .attr("y",function (d,i) {return i*vertdist+20+o_y})
                .text(function (d) {return  d.name;});




    }






    loadData();


</script>
</body>
</html>